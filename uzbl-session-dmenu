#! /bin/bash

uzbl_dir=${XDG_DATA_HOME:-$HOME/.local/share}/uzbl

action=$(echo -e "restore\nsave\nkill" | dmenu -l 50)
[[ -z $action ]] && { echo "No action chosen" >&2; exit 1; }

session=$(cat \
    <(echo "new") \
    <(find $uzbl_dir/sessions/ -type f | xargs -I{} -n 1 basename {}) \
    | dmenu -l 50 -p "Which session?")

[[ -z $session ]] && { echo "No session chosen" >&2; exit 1; }
[[ $session = new ]] && session=""
if [ -z $session ]; then
    uzbl-session $action
else
    uzbl-session $action -s $session
fi
